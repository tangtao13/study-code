<!--
 * @Author: myname
 * @Date: 2021-06-07 09:21:30
 * @LastEditors: Do not edit
 * @LastEditTime: 2021-06-07 16:06:11
-->

### 正则表达式

> 正则表达式是一个查找和替换字符串的强有力的工具。
>
> 在 JavaScript 中，正则表达式通过内置的“RegExp”类的对象来实现，并与字符串集成。

##### 模式（Patterns）和修饰符（flags）

-   声明方式

    ```javascript
    //构造函数声明
    let regexp = new RegExp('partterns', 'flags');
    //字面量声明
    regexp = /patterns/gim;
    ```

    通常我们使用的都是简短语法 /.../。但是它不接受任何变量插入，所以我们必须在写代码的时候就知道确切的 regexp。  
    另一方面，new RegExp 允许从字符串中动态地构造模式。

-   修饰符

    -   i  
        使用此修饰符后，搜索时不区分大小写: A 和 a 没有区别。
    -   g  
        使用此修饰符后，搜索时会查 找所 有的匹配项，而不只是第一个。
    -   m  
        多行模式
    -   u  
        开启完整的 unicode 支持。该修饰符能够修正对于代理对 的处理。  
        更详细的内容见章节 Unicode：修饰符 “u” 和 class \p{...}。
    -   y 粘滞模式

-   字符类  
    字符类（Character classes） 是一个特殊的符号，匹配特定集中的任何符号。

    -   \d （“d” 来自 “digit”）  
        数字：从 0 到 9 的字符。
    -   \s（“s” 来自 “space”）  
        空格符号：包括空格，制表符 \t，换行符 \n 和其他少数稀有字符，例如 \v，\f 和 \r。
    -   \w（“w” 来自 “word”）  
        “单字”字符：拉丁字母或数字或下划线 \_。非拉丁字母（如西里尔字母或印地文）不属于 \w。
    -   .  
        与 “除换行符之外的任何字符” 匹配。  
        带有“s”标志时点字符类严格匹配任何字符

        ```javascript
        alert('A\nB'.match(/A.B/)); // null (no match)
        alert('A\nB'.match(/A.B/s)); // A\nB (match!)
        ```

-   反向类  
    对于每个字符类，都有一个“反向类”，用相同的字母表示，但要以大写书写形式。

    -   \D  
        非数字：除 \d 以外的任何字符，例如字母。
    -   \S  
        非空格符号：除 \s 以外的任何字符，例如字母。
    -   \W  
        非单字字符：除 \w 以外的任何字符，例如非拉丁字母或空格。

-   贪婪模式（回溯）  
    在贪婪模式下（默认情况下），量词都会尽可能地重复多次。
-   懒惰模式  
    懒惰模式中的量词与贪婪模式中的是相反的。它想要“重复最少次数”。  
    通过在量词之后添加一个问号 '?' 来启用它，所以匹配模式变为 \*? 或 +?，甚至将 '?' 变为 ??。  
    ☆ 懒惰模式只能够通过带 ? 的量词启用
-   捕获组  
    模式的一部分可以用括号括起来 (...)。这称为“捕获组（capturing group）”。  
    这有两个影响：

    -   它允许将匹配的一部分作为结果数组中的单独项。
    -   如果我们将量词放在括号后，则它将括号视为一个整体。

-   避免回溯

    -   重写正则表达式
    -   前瞻断言
        ```javascript
        let regexp = /(?=(\w+))\1Script/;
        let regex1 = /^((?=(\w+))\2\s?)*$/;
        ```

##### 正则表达式（RegExp）和字符串（String）的方法

-   str.match(regexp)  
    有 3 种模式
    1. 如果 regexp 不带有 g 标记，则它以数组的形式返回第一个匹配项，其中包含分组和属性 index  
       （匹配项的位置）、input（输 入字符串，等于 str）
    2. 如果 regexp 带有 g 标记，则它将所有匹配项的数组作为字符串返回，而不包含分组和其他详细信息。
    3. 如果没有匹配项，则无论是否带有标记 g ，都将返回 null。
-   str.matchAll(regexp)  
    主要用来搜索所有组的所有匹配项。  
    与 match 相比有 3 个区别：
    1. 它返回包含匹配项的可迭代对象，而不是数组。我们可以用 Array.from 从中得到一个常规数组。
    2. 每个匹配项均以包含分组的数组形式返回（返回格式与不带 g 标记的 str.match 相同）。
    3. 如果没有结果，则返回的不是 null，而是一个空的可迭代对象。
-   str.split(regexp|substr, limit)
-   str.search(regexp)  
    返回第一个匹配项的位置，如果未找到，则返回 -1
-   str.replace(str|regexp, str|func)  
     这是用于搜索和替换的通用方法，是最有用的方法之一。它是搜索和替换字符串的瑞士军刀。 1. 当 replace 的第一个参数是字符串
    时，它仅替换第一个匹配项。 2. 第二个参数是一个替代字符串。我们可以在其中使用特殊字符：

    | 符号    | 替换字符串中的操作                                                  |
    | ------- | ------------------------------------------------------------------- |
    | $&      | 插入整个匹配项                                                      |
    | $`      | 在匹配项之前插入字符串的一部分                                      |
    | $'      | 在匹配项之后插入字符串的一部分                                      |
    | $n      | 如果 n 是一个 1 到 2 位的数字，则插入第 n 个分组的内容，详见 捕获组 |
    | $<name> | 插入带有给定 name 的括号内的内容，详见 捕获组                       |
    | $$      | 插入字符 $                                                          |

-   regexp.exec(str)  
    我们可以通过手动设置 lastIndex，用 regexp.exec 从给定位置进行搜索。
-   regexp.test(str)  
    查找匹配项，然后返回 true/false 表示是否存在。
