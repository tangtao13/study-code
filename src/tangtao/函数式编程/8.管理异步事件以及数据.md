<!--
 * @Author: myname
 * @Date: 2021-04-28 16:21:31
 * @LastEditors: Do not edit
 * @LastEditTime: 2021-04-28 17:30:38
-->

#### 本章内容

1. 编写异步代码的挑战
2. 通过函数式技术避免嵌套回调
3. 使用 Promise 简化异步代码
4. 用函数生成器惰性的生成数据
5. 响应式编程
6. 应用响应式编程来处理事件驱动的代码

> 程序员之所以认为函数式编程比其他编程更高效，是一位函数式编程的代码会少一个数量级。 --- John Hughes

##### 8.1 异步代码的挑战

```javascript
const getJson = function (url, success, error) {
    let req = new XMLHttpRequest();
    req.responseType = 'json';
    req.open('GET', url);
    req.onload = function () {
        if (req.status == 200) {
            let data = JSON.parse(req.responseText);
            success(data);
        } else {
            req.onerror();
        }
    };
    req.onerror = function () {
        if (error) {
            error(new Error(req.statusText));
        }
    };
    req.send();
};
```

---

```javascript
//生成器Generator
//定义一个生成器函数
function* range(start = 0, finish = Number.POSITIVE_INFINITY) {
    for (let i = start; i < finish; i++) {
        yield i;
    }
}
const num = range(1); //返回一个迭代器
num.next().value(); //1
num.next().value(); //2
num.next().value(); //3

//or
for (let n of range(1)) {
    console.log(n);
    if (n === threshold) {
        break;
    }
}
```
